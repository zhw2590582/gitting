!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.gitting=e()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=Math.ceil,r=Math.floor,u=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)},s=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},v=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),m=e(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),o=(m.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),g=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},i=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t},a=function(t){try{return!!t()}catch(t){return!0}},c=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=v.document,f=i(l)&&i(l.createElement),h=function(t){return f?l.createElement(t):{}},d=!c&&!a(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),y=Object.defineProperty,_={f:c?Object.defineProperty:function(t,e,n){if(p(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),p(n),d)try{return y(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},$=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=c?function(t,e,n){return _.f(t,e,$(1,n))}:function(t,e,n){return t[e]=n,t},b={}.hasOwnProperty,w=function(t,e){return b.call(t,e)},k="prototype",M=function(t,e,n){var r,i,o,a=t&M.F,s=t&M.G,c=t&M.S,u=t&M.P,l=t&M.B,f=t&M.W,h=s?m:m[e]||(m[e]={}),d=h[k],p=s?v:c?v[e]:(v[e]||{})[k];for(r in s&&(n=e),n)(i=!a&&p&&void 0!==p[r])&&w(h,r)||(o=i?p[r]:n[r],h[r]=s&&"function"!=typeof p[r]?n[r]:l&&i?g(o,v):f&&p[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[k]=r[k],t}(o):u&&"function"==typeof o?g(Function.call,o):o,u&&((h.virtual||(h.virtual={}))[r]=o,t&M.R&&d&&!d[r]&&x(d,r,o)))};M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var S,L=M,O=x,j={},T={}.toString,E=function(t){return T.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},I=function(t){return D(s(t))},P=Math.min,H=function(t){return 0<t?P(u(t),9007199254740991):0},A=Math.max,C=Math.min,F=e(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:m.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),N=0,R=Math.random(),G=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++N+R).toString(36))},U=F("keys"),z=function(t){return U[t]||(U[t]=G(t))},Y=(S=!1,function(t,e,n){var r,i,o,a=I(t),s=H(a.length),c=(i=s,(r=u(r=n))<0?A(r+i,0):C(r,i));if(S&&e!=e){for(;c<s;)if((o=a[c++])!=o)return!0}else for(;c<s;c++)if((S||c in a)&&a[c]===e)return S||c||0;return!S&&-1}),W=z("IE_PROTO"),B="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=Object.keys||function(t){return function(t,e){var n,r=I(t),i=0,o=[];for(n in r)n!=W&&w(r,n)&&o.push(n);for(;e.length>i;)w(r,n=e[i++])&&(~Y(o,n)||o.push(n));return o}(t,B)},V=c?Object.defineProperties:function(t,e){p(t);for(var n,r=J(e),i=r.length,o=0;o<i;)_.f(t,n=r[o++],e[n]);return t},q=v.document,Z=q&&q.documentElement,K=z("IE_PROTO"),Q=function(){},X="prototype",tt=function(){var t,e=h("iframe"),n=B.length;for(e.style.display="none",Z.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),tt=t.F;n--;)delete tt[X][B[n]];return tt()},et=Object.create||function(t,e){var n;return null!==t?(Q[X]=p(t),n=new Q,Q[X]=null,n[K]=t):n=tt(),void 0===e?n:V(n,e)},nt=e(function(t){var e=F("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:G)("Symbol."+t))}).store=e}),rt=_.f,it=nt("toStringTag"),ot=function(t,e,n){t&&!w(t=n?t:t.prototype,it)&&rt(t,it,{configurable:!0,value:e})},at={};x(at,nt("iterator"),function(){return this});var st,ct=function(t){return Object(s(t))},ut=z("IE_PROTO"),lt=Object.prototype,ft=Object.getPrototypeOf||function(t){return t=ct(t),w(t,ut)?t[ut]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?lt:null},ht=nt("iterator"),dt=!([].keys&&"next"in[].keys()),pt="values",vt=function(){return this},mt=function(t,e,n,r,i,o,a){var s,c,u;c=e,u=r,(s=n).prototype=et(at,{next:$(1,u)}),ot(s,c+" Iterator");var l,f,h,d=function(t){if(!dt&&t in g)return g[t];switch(t){case"keys":case pt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},p=e+" Iterator",v=i==pt,m=!1,g=t.prototype,y=g[ht]||g["@@iterator"]||i&&g[i],_=y||d(i),b=i?v?d("entries"):_:void 0,w="Array"==e&&g.entries||y;if(w&&(h=ft(w.call(new t)))!==Object.prototype&&h.next&&ot(h,p,!0),v&&y&&y.name!==pt&&(m=!0,_=function(){return y.call(this)}),a&&(dt||m||!g[ht])&&x(g,ht,_),j[e]=_,j[p]=vt,i)if(l={values:v?_:d(pt),keys:o?_:d("keys"),entries:b},a)for(f in l)f in g||O(g,f,l[f]);else L(L.P+L.F*(dt||m),e,l);return l},gt=(st=!0,function(t,e){var n,r,i=String(s(t)),o=u(e),a=i.length;return o<0||a<=o?st?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?st?i.charAt(o):n:st?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});mt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=gt(e,n),this._i+=t.length,{value:t,done:!1})});var yt=function(e,t,n,r){try{return r?t(p(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&p(i.call(e)),t}},_t=nt("iterator"),bt=Array.prototype,wt=function(t){return void 0!==t&&(j.Array===t||bt[_t]===t)},$t=function(t,e,n){e in t?_.f(t,e,$(0,n)):t[e]=n},xt=nt("toStringTag"),kt="Arguments"==E(function(){return arguments}()),Mt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xt))?n:kt?E(e):"Object"==(r=E(e))&&"function"==typeof e.callee?"Arguments":r},St=nt("iterator"),Lt=m.getIteratorMethod=function(t){if(null!=t)return t[St]||t["@@iterator"]||j[Mt(t)]},Ot=nt("iterator"),jt=!1;try{[7][Ot]().return=function(){jt=!0}}catch(t){}var Tt=function(t,e){if(!e&&!jt)return!1;var n=!1;try{var r=[7],i=r[Ot]();i.next=function(){return{done:n=!0}},r[Ot]=function(){return i},t(r)}catch(t){}return n};L(L.S+L.F*!Tt(function(t){}),"Array",{from:function(t){var e,n,r,i,o=ct(t),a="function"==typeof this?this:Array,s=arguments.length,c=1<s?arguments[1]:void 0,u=void 0!==c,l=0,f=Lt(o);if(u&&(c=g(c,2<s?arguments[2]:void 0,2)),null==f||a==Array&&wt(f))for(n=new a(e=H(o.length));l<e;l++)$t(n,l,u?c(o[l],l):o[l]);else for(i=f.call(o),n=new a;!(r=i.next()).done;l++)$t(n,l,u?yt(i,c,[r.value,l],!0):r.value);return n.length=l,n}});var Et=m.Array.from,Dt=e(function(t){t.exports={default:Et,__esModule:!0}});t(Dt);var It,Pt,Ht,At,Ct=t(e(function(t,e){e.__esModule=!0;var n,r=(n=Dt)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}})),Ft=m.JSON||(m.JSON={stringify:JSON.stringify}),Nt=function(t){return Ft.stringify.apply(Ft,arguments)},Rt=t(e(function(t){t.exports={default:Nt,__esModule:!0}}));It="keys",Pt=function(){return function(t){return J(ct(t))}},Ht=(m.Object||{})[It]||Object[It],(At={})[It]=Pt(Ht),L(L.S+L.F*a(function(){Ht(1)}),"Object",At);var Gt=m.Object.keys,Ut=t(e(function(t){t.exports={default:Gt,__esModule:!0}})),zt=e(function(E){!function(t){var c,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a=t.regeneratorRuntime;if(a)E.exports=a;else{(a=t.regeneratorRuntime=E.exports).wrap=y;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},s={};s[i]=function(){return this};var l=Object.getPrototypeOf,m=l&&l(l(j([])));m&&m!==e&&u.call(m,i)&&(s=m);var g=$.prototype=b.prototype=Object.create(s);w.prototype=g.constructor=$,$.constructor=w,$[o]=w.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[r]=function(){return this},a.AsyncIterator=k,a.async=function(t,e,n,r){var i=new k(y(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),v}}}function y(t,e,n,r){var o,a,s,c,i=e&&e.prototype instanceof b?e:b,u=Object.create(i.prototype),l=new O(r||[]);return u._invoke=(o=t,a=n,s=l,c=f,function(t,e){if(c===d)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return T()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=M(n,s);if(r){if(r===v)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===f)throw c=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=d;var i=_(o,a,s);if("normal"===i.type){if(c=s.done?p:h,i.arg===v)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c=p,s.method="throw",s.arg=i.arg)}}),u}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function b(){}function w(){}function $(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(c){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=_(c[t],c,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},i)}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function M(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,M(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=_(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,v;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")())}),Yt=function(){return this}()||Function("return this")(),Wt=Yt.regeneratorRuntime&&0<=Object.getOwnPropertyNames(Yt).indexOf("regeneratorRuntime"),Bt=Wt&&Yt.regeneratorRuntime;Yt.regeneratorRuntime=void 0;var Jt=zt;if(Wt)Yt.regeneratorRuntime=Bt;else try{delete Yt.regeneratorRuntime}catch(t){Yt.regeneratorRuntime=void 0}var Vt=Jt,qt=function(t,e){return{value:e,done:!!t}};mt(Array,"Array",function(t,e){this._t=I(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,qt(1)):qt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");j.Arguments=j.Array;for(var Zt=nt("toStringTag"),Kt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Qt=0;Qt<Kt.length;Qt++){var Xt=Kt[Qt],te=v[Xt],ee=te&&te.prototype;ee&&!ee[Zt]&&x(ee,Zt,Xt),j[Xt]=j.Array}var ne,re,ie,oe=e(function(t){var h={},d={},e=t.exports=function(t,e,n,r,i){var o,a,s,c,u=i?function(){return t}:Lt(t),l=g(n,r,e?2:1),f=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(wt(u)){for(o=H(t.length);f<o;f++)if((c=e?l(p(a=t[f])[0],a[1]):l(t[f]))===h||c===d)return c}else for(s=u.call(t);!(a=s.next()).done;)if((c=yt(s,l,a.value,e))===h||c===d)return c};e.BREAK=h,e.RETURN=d}),ae=nt("species"),se=function(t,e){var n,r=p(t).constructor;return void 0===r||null==(n=p(r)[ae])?e:o(n)},ce=v.process,ue=v.setImmediate,le=v.clearImmediate,fe=v.MessageChannel,he=v.Dispatch,de=0,pe={},ve="onreadystatechange",me=function(){var t=+this;if(pe.hasOwnProperty(t)){var e=pe[t];delete pe[t],e()}},ge=function(t){me.call(t.data)};ue&&le||(ue=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return pe[++de]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},ne(de),de},le=function(t){delete pe[t]},"process"==E(ce)?ne=function(t){ce.nextTick(g(me,t,1))}:he&&he.now?ne=function(t){he.now(g(me,t,1))}:fe?(ie=(re=new fe).port2,re.port1.onmessage=ge,ne=g(ie.postMessage,ie,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts?(ne=function(t){v.postMessage(t+"","*")},v.addEventListener("message",ge,!1)):ne=ve in h("script")?function(t){Z.appendChild(h("script"))[ve]=function(){Z.removeChild(this),me.call(t)}}:function(t){setTimeout(g(me,t,1),0)});var ye={set:ue,clear:le},_e=ye.set,be=v.MutationObserver||v.WebKitMutationObserver,we=v.process,$e=v.Promise,xe="process"==E(we);function ke(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=o(n),this.reject=o(r)}var Me,Se,Le,Oe,je,Te,Ee={f:function(t){return new ke(t)}},De=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ie=v.navigator,Pe=Ie&&Ie.userAgent||"",He=function(t,e){if(p(t),i(e)&&e.constructor===t)return e;var n=Ee.f(t);return(0,n.resolve)(e),n.promise},Ae=nt("species"),Ce=ye.set,Fe=function(){var n,r,i,t=function(){var t,e;for(xe&&(t=we.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(xe)i=function(){we.nextTick(t)};else if(!be||v.navigator&&v.navigator.standalone)if($e&&$e.resolve){var e=$e.resolve(void 0);i=function(){e.then(t)}}else i=function(){_e.call(v,t)};else{var o=!0,a=document.createTextNode("");new be(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}(),Ne="Promise",Re=v.TypeError,Ge=v.process,Ue=Ge&&Ge.versions,ze=Ue&&Ue.v8||"",Ye=v[Ne],We="process"==Mt(Ge),Be=function(){},Je=Se=Ee.f,Ve=!!function(){try{var t=Ye.resolve(1),e=(t.constructor={})[nt("species")]=function(t){t(Be,Be)};return(We||"function"==typeof PromiseRejectionEvent)&&t.then(Be)instanceof e&&0!==ze.indexOf("6.6")&&-1===Pe.indexOf("Chrome/66")}catch(t){}}(),qe=function(t){var e;return!(!i(t)||"function"!=typeof(e=t.then))&&e},Ze=function(l,n){if(!l._n){l._n=!0;var r=l._c;Fe(function(){for(var c=l._v,u=1==l._s,t=0,e=function(t){var e,n,r,i=u?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain;try{i?(u||(2==l._h&&Xe(l),l._h=1),!0===i?e=c:(s&&s.enter(),e=i(c),s&&(s.exit(),r=!0)),e===t.promise?a(Re("Promise-chain cycle")):(n=qe(e))?n.call(e,o,a):o(e)):a(c)}catch(t){s&&!r&&s.exit(),a(t)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&Ke(l)})}},Ke=function(o){Ce.call(v,function(){var t,e,n,r=o._v,i=Qe(o);if(i&&(t=De(function(){We?Ge.emit("unhandledRejection",r,o):(e=v.onunhandledrejection)?e({promise:o,reason:r}):(n=v.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=We||Qe(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},Qe=function(t){return 1!==t._h&&0===(t._a||t._c).length},Xe=function(e){Ce.call(v,function(){var t;We?Ge.emit("rejectionHandled",e):(t=v.onrejectionhandled)&&t({promise:e,reason:e._v})})},tn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ze(e,!0))},en=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Re("Promise can't be resolved itself");(n=qe(t))?Fe(function(){var e={_w:r,_d:!1};try{n.call(t,g(en,e,1),g(tn,e,1))}catch(t){tn.call(e,t)}}):(r._v=t,r._s=1,Ze(r,!1))}catch(t){tn.call({_w:r,_d:!1},t)}}};Ve||(Ye=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,Ye,Ne,"_h"),o(t),Me.call(this);try{t(g(en,this,1),g(tn,this,1))}catch(t){tn.call(this,t)}},(Me=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:x(t,r,e[r]);return t}(Ye.prototype,{then:function(t,e){var n=Je(se(this,Ye));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=We?Ge.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ze(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Le=function(){var t=new Me;this.promise=t,this.resolve=g(en,t,1),this.reject=g(tn,t,1)},Ee.f=Je=function(t){return t===Ye||t===Oe?new Le(t):Se(t)}),L(L.G+L.W+L.F*!Ve,{Promise:Ye}),ot(Ye,Ne),Te="function"==typeof m[je=Ne]?m[je]:v[je],c&&Te&&!Te[Ae]&&_.f(Te,Ae,{configurable:!0,get:function(){return this}}),Oe=m[Ne],L(L.S+L.F*!Ve,Ne,{reject:function(t){var e=Je(this);return(0,e.reject)(t),e.promise}}),L(L.S+!0*L.F,Ne,{resolve:function(t){return He(this===Oe?Ye:this,t)}}),L(L.S+L.F*!(Ve&&Tt(function(t){Ye.all(t).catch(Be)})),Ne,{all:function(t){var a=this,e=Je(a),s=e.resolve,c=e.reject,n=De(function(){var r=[],i=0,o=1;oe(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||s(r))},c)}),--o||s(r)});return n.e&&c(n.v),e.promise},race:function(t){var e=this,n=Je(e),r=n.reject,i=De(function(){oe(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),L(L.P+L.R,"Promise",{finally:function(e){var n=se(this,m.Promise||v.Promise),t="function"==typeof e;return this.then(t?function(t){return He(n,e()).then(function(){return t})}:e,t?function(t){return He(n,e()).then(function(){throw t})}:e)}}),L(L.S,"Promise",{try:function(t){var e=Ee.f(this),n=De(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var nn=m.Promise,rn=e(function(t){t.exports={default:nn,__esModule:!0}}),on=t(rn),an=t(e(function(t,e){e.__esModule=!0;var n,c=(n=rn)&&n.__esModule?n:{default:n};e.default=function(t){return function(){var s=t.apply(this,arguments);return new c.default(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return c.default.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}})),sn={f:Object.getOwnPropertySymbols},cn={f:{}.propertyIsEnumerable},un=Object.assign,ln=!un||a(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=un({},t)[n]||Object.keys(un({},e)).join("")!=r})?function(t,e){for(var n=ct(t),r=arguments.length,i=1,o=sn.f,a=cn.f;i<r;)for(var s,c=D(arguments[i++]),u=o?J(c).concat(o(c)):J(c),l=u.length,f=0;f<l;)a.call(c,s=u[f++])&&(n[s]=c[s]);return n}:un;L(L.S+L.F,"Object",{assign:ln});var fn=m.Object.assign,hn=t(e(function(t){t.exports={default:fn,__esModule:!0}})),dn=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));L(L.S+L.F*!c,"Object",{defineProperty:_.f});var pn=m.Object,vn=function(t,e,n){return pn.defineProperty(t,e,n)},mn=e(function(t){t.exports={default:vn,__esModule:!0}});t(mn);var gn=t(e(function(t,e){e.__esModule=!0;var n,i=(n=mn)&&n.__esModule?n:{default:n};e.default=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}()})),yn={"zh-cn":{init:"初始化一个评论",counts:"条评论",login:"登录",logout:"注销",leave:"发表评论",styling:"支持使用Markdown进行样式设置",write:"编写",preview:"预览",noPreview:"无预览内容",submit:"提交",reply:"回复",loadMore:"加载更多",loadEnd:"加载完毕",published:"发表于"},en:{init:"Initialize A Issue",counts:"comments",login:"Login",logout:"Logout",leave:"Leave a comment",styling:"Styling with Markdown is supported",write:"Write",preview:"Preview",noPreview:"Nothing to preview",submit:"Submit",reply:"Reply",loadMore:"Load More",loadEnd:"Load completed",published:"Published on"}};var _n=function(){return(window.location.href.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce(function(t,e){return t[e.slice(0,e.indexOf("="))]=e.slice(e.indexOf("=")+1),t},{})},bn=function(e){return Ut(e).map(function(t){return t+"="+encodeURIComponent(e[t]||"")}).join("&")},wn=function(t,e){localStorage.setItem(t,Rt(e))},$n=function(t){return JSON.parse(localStorage.getItem(t))},xn=function(t){localStorage.removeItem(t)},kn=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,e=arguments[1];return t.querySelector(e)},Mn=function(t){var e=t instanceof Element?t:document.querySelector(t);e&&e.parentNode&&e.parentNode.removeChild(e)},Sn=function(t){var e=t instanceof Element?t:document.querySelector(t),n=document.createElement("div");return n.classList.add("gt-loading"),n.innerHTML='\n    <div class="lds-ellipsis">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  ',e.appendChild(n),function(){return e.removeChild(n)}},Ln=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;window.scroll({behavior:"smooth",left:0,top:t.getBoundingClientRect().top+window.scrollY+e})},On=function(t,e,n,r){t=t.toUpperCase(),n=n&&Rt(n);var i={"Content-Type":"application/json",Accept:"application/json"};r&&(i=hn({},i,r));var o=$n("gitting-token");return o&&(i.Authorization="token "+o),fetch(e,{method:t,headers:i,body:n}).then(function(t){return 404===t.status?on.reject("Unauthorized."):401!==t.status?"text/html"===i.Accept?t.text():t.json():(xn("gitting-token"),xn("gitting-userInfo"),void location.reload())})};var jn=e(function(t,e){t.exports=function(){var n="millisecond",c="second",u="minute",l="hour",f="day",h="week",d="month",p="year",r=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,v=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,t={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},i=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},e={padStart:i,padZoneStr:function(t){var e=Math.abs(t),n=Math.floor(e/60),r=e%60;return(t<=0?"+":"-")+i(n,2,"0")+":"+i(r,2,"0")},monthDiff:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months"),i=e-r<0,o=t.clone().add(n+(i?-1:1),"months");return Number(-(n+(e-r)/(i?r-o:o-r)))},absFloor:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},prettyUnit:function(t){return{M:d,y:p,w:h,d:f,h:l,m:u,s:c,ms:n}[t]||String(t||"").toLowerCase().replace(/s$/,"")},isUndefined:function(t){return void 0===t}},o="en",a={};a[o]=t;var s=function(t){return t instanceof b},m=function(t,e,n){var r;if(!t)return null;if("string"==typeof t)a[t]&&(r=t),e&&(a[t]=e,r=t);else{var i=t.name;a[i]=t,r=i}return n||(o=r),r},g=function(t,e){if(s(t))return t.clone();var n=e||{};return n.date=t,new b(n)},y=function(t,e){return g(t,{locale:e.$L})},_=e;_.parseLocale=m,_.isDayjs=s,_.wrapper=y;var b=function(){function t(t){this.parse(t)}var e=t.prototype;return e.parse=function(t){var e,n;this.$d=null===(e=t.date)?new Date(NaN):_.isUndefined(e)?new Date:e instanceof Date?e:"string"==typeof e&&/.*[^Z]$/i.test(e)&&(n=e.match(r))?new Date(n[1],n[2]-1,n[3]||1,n[5]||0,n[6]||0,n[7]||0,n[8]||0):new Date(e),this.init(t)},e.init=function(t){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds(),this.$L=this.$L||m(t.locale,null,!0)||o},e.$utils=function(){return _},e.isValid=function(){return!("Invalid Date"===this.$d.toString())},e.$compare=function(t){return this.valueOf()-g(t).valueOf()},e.isSame=function(t){return 0===this.$compare(t)},e.isBefore=function(t){return this.$compare(t)<0},e.isAfter=function(t){return 0<this.$compare(t)},e.year=function(){return this.$y},e.month=function(){return this.$M},e.day=function(){return this.$W},e.date=function(){return this.$D},e.hour=function(){return this.$H},e.minute=function(){return this.$m},e.second=function(){return this.$s},e.millisecond=function(){return this.$ms},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var r=this,i=!!_.isUndefined(e)||e,n=function(t,e){var n=y(new Date(r.$y,e,t),r);return i?n:n.endOf(f)},o=function(t,e){return y(r.toDate()[t].apply(r.toDate(),i?[0,0,0,0].slice(e):[23,59,59,999].slice(e)),r)};switch(_.prettyUnit(t)){case p:return i?n(1,0):n(31,11);case d:return i?n(1,this.$M):n(0,this.$M+1);case h:return n(i?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case f:case"date":return o("setHours",0);case l:return o("setMinutes",1);case u:return o("setSeconds",2);case c:return o("setMilliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){switch(_.prettyUnit(t)){case f:this.$d.setDate(this.$D+(e-this.$W));break;case"date":this.$d.setDate(e);break;case d:this.$d.setMonth(e);break;case p:this.$d.setFullYear(e);break;case l:this.$d.setHours(e);break;case u:this.$d.setMinutes(e);break;case c:this.$d.setSeconds(e);break;case n:this.$d.setMilliseconds(e)}return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.add=function(r,t){var i=this;r=Number(r);var e,n=_.prettyUnit(t),o=function(t,e){var n=i.set("date",1).set(t,e+r);return n.set("date",Math.min(i.$D,n.daysInMonth()))},a=function(t){var e=new Date(i.$d);return e.setDate(e.getDate()+t*r),y(e,i)};if(n===d)return o(d,this.$M);if(n===p)return o(p,this.$y);if(n===f)return a(1);if(n===h)return a(7);switch(n){case u:e=6e4;break;case l:e=36e5;break;case c:e=1e3;break;default:e=1}var s=this.valueOf()+r*e;return y(s,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,n=t||"YYYY-MM-DDTHH:mm:ssZ",r=_.padZoneStr(this.$d.getTimezoneOffset()),i=this.$locale(),o=i.weekdays,a=i.months,s=function(t,e,n,r){return t&&t[e]||n[e].substr(0,r)};return n.replace(v,function(t){if(-1<t.indexOf("["))return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return _.padStart(e.$M+1,2,"0");case"MMM":return s(i.monthsShort,e.$M,a,3);case"MMMM":return a[e.$M];case"D":return String(e.$D);case"DD":return _.padStart(e.$D,2,"0");case"d":return String(e.$W);case"dd":return s(i.weekdaysMin,e.$W,o,2);case"ddd":return s(i.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(e.$H);case"HH":return _.padStart(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:_.padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return _.padStart(e.$m,2,"0");case"s":return String(e.$s);case"ss":return _.padStart(e.$s,2,"0");case"SSS":return _.padStart(e.$ms,3,"0");case"Z":return r;default:return r.replace(":","")}})},e.diff=function(t,e,n){var r=_.prettyUnit(e),i=g(t),o=this-i,a=_.monthDiff(this,i);switch(r){case p:a/=12;break;case d:break;case"quarter":a/=3;break;case h:a=o/6048e5;break;case f:a=o/864e5;break;case l:a=o/36e5;break;case u:a=o/6e4;break;case c:a=o/1e3;break;default:a=o}return n?a:_.absFloor(a)},e.daysInMonth=function(){return this.endOf(d).$D},e.$locale=function(){return a[this.$L]},e.locale=function(t,e){var n=this.clone();return n.$L=m(t,e,!0),n},e.clone=function(){return y(this.toDate(),this)},e.toDate=function(){return new Date(this.$d)},e.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},e.toJSON=function(){return this.toISOString()},e.toISOString=function(){return this.toDate().toISOString()},e.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},e.toString=function(){return this.$d.toUTCString()},t}();return g.extend=function(t,e){return t(e,b,g),g},g.locale=m,g.isDayjs=s,g.unix=function(t){return g(1e3*t)},g.en=a[o],g}()}),Tn=e(function(t,e){t.exports=function(t,e,h){var n=e.prototype;h.en.relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};var r=function(t,e,n,r){for(var i,o,a=n.$locale().relativeTime,s=[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],c=s.length,u=0;u<c;u+=1){var l=s[u];l.d&&(i=r?h(t).diff(n,l.d,!0):n.diff(t,l.d,!0));var f=Math.ceil(Math.abs(i));if(f<=l.r||!l.r){o=a[l.l].replace("%d",f);break}}return e?o:(0<i?a.future:a.past).replace("%s",o)};n.to=function(t,e){return r(t,e,this,!0)},n.from=function(t,e){return r(t,e,this)},n.toNow=function(t){return this.to(h(),t)},n.fromNow=function(t){return this.from(h(),t)}}});e(function(t,e){t.exports=function(t){t=t&&t.hasOwnProperty("default")?t.default:t;var e={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t){return t+"日"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"}};return t.locale(e,null,!0),e}(jn)});jn.extend(Tn);var En=function(){function a(t){var r,i,o,e,n;dn(this,a),this.option=hn({},a.DEFAULTS,t),this.api=(r=this.option,i="https://api.github.com/repos/"+r.owner+"/"+r.repo+"/issues",o={client_id:r.clientID,client_secret:r.clientSecret},{getToken:function(t){var e=hn({},o,{code:t,redirect_uri:location.href});return On("get",r.proxy+"?"+bn(e))},getUserInfo:function(t){return On("get","https://api.github.com/user?access_token="+t)},getIssueByLabel:function(t){var e=hn({},o,{labels:t,t:(new Date).getTime()});return On("get",i+"?"+bn(e))},getIssueById:function(t){var e=hn({},o,{t:(new Date).getTime()});return On("get",i+"/"+t+"?"+bn(e))},getComments:function(t,e){var n=hn({},o,{per_page:r.perPage,page:e,t:(new Date).getTime()});return On("get",i+"/"+t+"/comments?"+bn(n),null,{Accept:"application/vnd.github.v3.full+json"})},creatIssues:function(t){return On("post",i,t)},creatComments:function(t,e){return On("post",i+"/"+t+"/comments",{body:e},{Accept:"application/vnd.github.v3.full+json"})},mdToHtml:function(t){return On("post","https://api.github.com/markdown",{text:t},{Accept:"text/html"})}}),this.page=1,this.issue={},this.comments=[],this.token=$n("gitting-token"),this.userInfo=$n("gitting-userInfo"),this.isLogin=!!this.token&&!!this.userInfo,this.i=(e=this.option.language,n=yn[e]||yn["zh-cn"],function(t){return n[t]||"Unmath key: "+t}),this.creatInit=this.creatInit.bind(this),this.logout=this.logout.bind(this),jn.locale(this.option.language)}var t,e,n,r;return gn(a,[{key:"render",value:(r=an(Vt.mark(function t(e){var n,r,i,o;return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.option.initStart&&this.option.initStart(),this.$container=e instanceof Element?e:kn(document,e),this.$container.innerHTML="",n=Sn(e),r=_n(),i=r.code)return t.next=8,this.getUserInfo(i);t.next=8;break;case 8:if(0<Number(this.option.number))return t.next=11,this.api.getIssueById(this.option.number);t.next=15;break;case 11:this.issue=t.sent,this.errorHandle(!this.issue||!this.issue.number,"Failed to get issue by id ["+this.option.number+"] , Do you want to initialize an new issue?",this.creatInit),t.next=20;break;case 15:return o=this.option.labels.concat(this.option.id).join(","),t.next=18,this.api.getIssueByLabel(o);case 18:this.issue=t.sent[0],this.errorHandle(!this.issue||!this.issue.number,"Failed to get issue by labels ["+o+"] , Do you want to initialize an new issue?",this.creatInit);case 20:return n(),t.next=23,this.creatGitting();case 23:return t.next=25,this.creatComment();case 25:return t.next=27,this.eventBind();case 27:this.option.initEnd&&this.option.initEnd();case 28:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getUserInfo",value:(n=an(Vt.mark(function t(e){var n,r,i,o;return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return delete(n=_n()).code,r=location.href.split("?")[0]+(0<Ut(n)?"?":"")+bn(n),history.replaceState(null,"",r),t.next=6,this.api.getToken(e);case 6:return i=t.sent,this.errorHandle(!i.access_token,"Can not get token, Please login again!",this.logout),wn("gitting-token",i.access_token),this.token=i.access_token,t.next=12,this.api.getUserInfo(i.access_token);case 12:return o=t.sent,this.errorHandle(!o.id,"Can not get user info, Please login again!",this.logout),wn("gitting-userInfo",o),this.userInfo=o,this.isLogin=!0,t.abrupt("return",o);case 18:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"creatInit",value:function(){var e,n=this,t={state:"Gitting",client_id:this.option.clientID,redirect_uri:location.href,scope:"public_repo"};(this.$container.insertAdjacentHTML("beforeend",'\n        <div class="gt-init">\n          '+(this.isLogin?'<a class="gt-init-btn" href="#">'+this.i("init")+"</a>":'<a class="gt-login" href="http://github.com/login/oauth/authorize?client_id='+bn(t)+'">'+this.i("login")+"</a>")+"\n        </div>\n      "),this.isLogin)&&(this.$init=kn(this.$container,".gt-init-btn"),this.$init.addEventListener("click",(e=an(Vt.mark(function t(e){return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),n.initIssue();case 2:case"end":return t.stop()}},t,n)})),function(t){return e.apply(this,arguments)})))}},{key:"initIssue",value:(e=an(Vt.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorHandle(!this.userInfo.login,"You have not logged in yet"),this.errorHandle(!this.option.admin.includes(this.userInfo.login),"You have no permission to initialize this issue"),e=Sn(this.$container),n=hn({},{title:this.option.title,body:this.option.body,labels:this.option.labels.concat(this.option.id)},i),t.next=6,this.api.creatIssues(n);case 6:r=t.sent,this.errorHandle(!r||!r.number,"Initialize issue failed: "+Rt(n),e),location.reload();case 9:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"creatGitting",value:function(){var t={state:"Gitting",client_id:this.option.clientID,redirect_uri:location.href,scope:"public_repo"};this.$container.insertAdjacentHTML("beforeend",'\n      <div class="gt-header clearfix">\n        <a href="'+this.issue.html_url+'" class="fl" target="_blank">\n          '+this.issue.comments+" "+this.i("counts")+'\n        </a>\n        <div class="gt-mate fr clearfix">\n          '+(this.isLogin?'<a href="'+this.userInfo.html_url+'" class="gt-name fl" target="_blank">'+this.userInfo.login+'</a><a href="#" class="gt-logout fl">'+this.i("logout")+"</a>":'<a href="http://github.com/login/oauth/authorize?client_id='+bn(t)+'" class="gt-login fl">'+this.i("login")+"</a>")+'\n          <a href="https://github.com/zhw2590582/gitting" class="fl" target="_blank">Gitting 1.0.8</a>\n        </div>\n      </div>\n      <div class="gt-body">\n        <div class="gt-avatar">\n          <img src="'+(this.isLogin?this.userInfo.avatar_url:this.option.avatar)+'" alt="@'+(this.isLogin?this.userInfo.login:"github")+'">\n        </div>\n        <div class="gt-editor">\n            <div class="gt-markdown markdown-body"></div>\n            <textarea placeholder="'+this.i("leave")+'" class="gt-textarea" maxlength="'+this.option.maxlength+'"></textarea>\n            <div class="gt-tip clearfix">\n                <a class="fl" href="https://guides.github.com/features/mastering-markdown/" target="_blank">'+this.i("styling")+'</a>\n                <div class="fr">\n                  <span class="gt-counts">0</span> / '+this.option.maxlength+'\n                </div>\n            </div>\n            <div class="gt-tool clearfix">\n                <div class="gt-switch fl clearfix">\n                    <span class="gt-write gt-btn fl active">'+this.i("write")+'</span>\n                    <span class="gt-preview gt-btn fl">'+this.i("preview")+"</span>\n                </div>\n                "+(this.isLogin?'<button class="gt-send fr">'+this.i("submit")+"</button>":'<a class="gt-send fr" href="http://github.com/login/oauth/authorize?client_id='+bn(t)+'">'+this.i("login")+"</a>")+'\n            </div>\n          </div>\n      </div>\n      <div class="gt-comments"></div>\n      <div class="gt-comments-load"></div>\n    '),this.$editor=kn(this.$container,".gt-editor"),this.$markdown=kn(this.$container,".gt-markdown"),this.$textarea=kn(this.$container,".gt-textarea"),this.$counts=kn(this.$container,".gt-counts"),this.$comments=kn(this.$container,".gt-comments"),this.$commentsLoad=kn(this.$container,".gt-comments-load")}},{key:"creatComment",value:(t=an(Vt.mark(function t(){var e,n,r,i,o=this;return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$commentsLoad.innerHTML="",n=Sn(this.$commentsLoad),t.next=4,this.api.getComments(this.issue.number,this.page++);case 4:return r=t.sent,(e=this.comments).push.apply(e,Ct(r)),i=r.map(function(t){return o.commentTemplate(t)}).join(""),this.$comments.insertAdjacentHTML("beforeend",i),n(),r.length<this.option.perPage?this.$commentsLoad.innerHTML='<div class="gt-load-end">'+this.i("loadEnd")+"</div>":this.$commentsLoad.innerHTML='<a class="gt-load-more" href="#">'+this.i("loadMore")+"</a>",t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"commentTemplate",value:function(t){return'\n      <div class="comments-item'+(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?" add":"")+'" data-id="'+t.id+'">\n        <div class="gt-avatar">\n          <img src="'+t.user.avatar_url+'" alt="@'+t.user.login+'">\n        </div>\n        <div class="gt-comment-content caret">\n          <div class="gt-comment-body markdown-body">\n            '+t.body_html+'\n          </div>\n          <div class="gt-comment-mate clearfix">\n            <a class="gt-comment-name fl" href="'+t.user.html_url+'" target="_blank">'+t.user.login+'</a>\n            <span class="gt-comment-time fl" data-time="'+t.created_at+'">'+this.i("published")+" "+jn(t.created_at).fromNow()+'</span>\n            <a class="gt-comment-reply fr" href="#" target="_blank" data-id="'+t.id+'">'+this.i("reply")+"</a>\n          </div>\n        </div>\n      </div>\n    "}},{key:"eventBind",value:function(){var g=this,t=["propertychange","change","click","keyup","input","paste"],y=function(t){return g.$counts.innerHTML=g.$textarea.value.length};t.forEach(function(t){return g.$textarea.addEventListener(t,y)});var e,n=(e=an(Vt.mark(function t(e){var n,r,i,o,a,s,c,u,l,f,h,d,p,v,m;return Vt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.target).classList.contains("gt-logout")&&(e.preventDefault(),g.logout()),n.classList.contains("gt-write")&&(g.$editor.classList.remove("gt-mode-preview"),g.$markdown.innerHTML=""),!n.classList.contains("gt-preview")){t.next=16;break}if(g.$editor.classList.add("gt-mode-preview"),(r=g.$textarea.value).trim())return i=Sn(g.$markdown),t.next=10,g.api.mdToHtml(r);t.next=15;break;case 10:o=t.sent,i(),g.$markdown.innerHTML=o,t.next=16;break;case 15:g.$markdown.innerHTML=g.i("noPreview");case 16:if(!n.classList.contains("gt-send")){t.next=30;break}if((a=g.$textarea.value).trim()){t.next=20;break}return t.abrupt("return");case 20:return s=Sn(g.$editor),t.next=23,g.api.creatComments(g.issue.number,a);case 23:c=t.sent,s(),g.errorHandle(!c||!c.id,"Comment failed!"),g.$textarea.value="",g.$comments.insertAdjacentHTML("beforeend",g.commentTemplate(c,!0)),u=kn(g.$container,"[data-id='"+c.id+"']"),Ln(u);case 30:if(!n.classList.contains("gt-comment-reply")){t.next=43;break}if(e.preventDefault(),l=n.dataset.id,f=g.comments.find(function(t){return t.id==l}),h=g.$textarea.value,d=(h?"\n":"")+"> @"+f.user.login+"\n> "+f.body+"\n",(p=h+d).length>g.option.maxlength)return t.abrupt("return");t.next=39;break;case 39:g.$textarea.value=p,y(),g.$textarea.focus(),Ln(g.$textarea,-30);case 43:if(n.classList.contains("gt-load-more"))return e.preventDefault(),t.next=47,g.creatComment();t.next=49;break;case 47:(v=t.sent).length&&(m=kn(g.$container,"[data-id='"+v[0].id+"']"),Ln(m,-100));case 49:case"end":return t.stop()}},t,g)})),function(t){return e.apply(this,arguments)});this.$container.addEventListener("click",n),this.destroy=function(){t.forEach(function(t){return g.$textarea.removeEventListener(t,y)}),g.$container.removeEventListener("click",n)}}},{key:"logout",value:function(){xn("gitting-token"),xn("gitting-userInfo"),location.reload()}},{key:"errorHandle",value:function(t,e,n){if(t)throw Mn(kn(this.$container,".gt-error")),Mn(kn(this.$container,".gt-loading")),this.$container.insertAdjacentHTML("afterbegin",'<div class="gt-error">'+e+"</div>"),n&&n(),new TypeError(e)}}],[{key:"DEFAULTS",get:function(){return{clientID:"",clientSecret:"",repo:"",owner:"",admin:[],id:location.pathname,number:-1,labels:["Gitting"],title:document.title,body:document.title+"\n"+location.href,language:"zh-cn",perPage:10,maxlength:500,avatar:"https://assets-cdn.github.com/images/modules/logos_page/GitHub-Mark.png",proxy:"https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token"}}}]),a}();return window.Gitting=En});
