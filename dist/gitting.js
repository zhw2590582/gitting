!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.gitting=e()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=Math.ceil,r=Math.floor,s=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)},u=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},v=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=e(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),o=(g.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),m=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},i=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t},a=function(t){try{return!!t()}catch(t){return!0}},c=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=v.document,f=i(l)&&i(l.createElement),h=function(t){return f?l.createElement(t):{}},d=!c&&!a(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),y=Object.defineProperty,_={f:c?Object.defineProperty:function(t,e,n){if(p(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),p(n),d)try{return y(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b=c?function(t,e,n){return _.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},$={}.hasOwnProperty,x=function(t,e){return $.call(t,e)},L="prototype",M=function(t,e,n){var r,i,o,a=t&M.F,s=t&M.G,u=t&M.S,c=t&M.P,l=t&M.B,f=t&M.W,h=s?g:g[e]||(g[e]={}),d=h[L],p=s?v:u?v[e]:(v[e]||{})[L];for(r in s&&(n=e),n)(i=!a&&p&&void 0!==p[r])&&x(h,r)||(o=i?p[r]:n[r],h[r]=s&&"function"!=typeof p[r]?n[r]:l&&i?m(o,v):f&&p[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[L]=r[L],t}(o):c&&"function"==typeof o?m(Function.call,o):o,c&&((h.virtual||(h.virtual={}))[r]=o,t&M.R&&d&&!d[r]&&b(d,r,o)))};M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var k,S=M,O=b,T={},j={}.toString,D=function(t){return j.call(t).slice(8,-1)},E=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==D(t)?t.split(""):Object(t)},I=function(t){return E(u(t))},P=Math.min,A=function(t){return 0<t?P(s(t),9007199254740991):0},H=Math.max,C=Math.min,N=e(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Y=0,F=Math.random(),R=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Y+F).toString(36))},G=N("keys"),z=function(t){return G[t]||(G[t]=R(t))},U=(k=!1,function(t,e,n){var r,i=I(t),o=A(i.length),a=function(t,e){return(t=s(t))<0?H(t+e,0):C(t,e)}(n,o);if(k&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((k||a in i)&&i[a]===e)return k||a||0;return!k&&-1}),W=z("IE_PROTO"),B="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),V=Object.keys||function(t){return function(t,e){var n,r=I(t),i=0,o=[];for(n in r)n!=W&&x(r,n)&&o.push(n);for(;e.length>i;)x(r,n=e[i++])&&(~U(o,n)||o.push(n));return o}(t,B)},J=c?Object.defineProperties:function(t,e){p(t);for(var n,r=V(e),i=r.length,o=0;o<i;)_.f(t,n=r[o++],e[n]);return t},q=v.document,Z=q&&q.documentElement,K=z("IE_PROTO"),Q=function(){},X="prototype",tt=function(){var t,e=h("iframe"),n=B.length;for(e.style.display="none",Z.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),tt=t.F;n--;)delete tt[X][B[n]];return tt()},et=Object.create||function(t,e){var n;return null!==t?(Q[X]=p(t),n=new Q,Q[X]=null,n[K]=t):n=tt(),void 0===e?n:J(n,e)},nt=e(function(t){var e=N("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:R)("Symbol."+t))}).store=e}),rt=_.f,it=nt("toStringTag"),ot=function(t,e,n){t&&!x(t=n?t:t.prototype,it)&&rt(t,it,{configurable:!0,value:e})},at={};b(at,nt("iterator"),function(){return this});var st,ut=function(t){return Object(u(t))},ct=z("IE_PROTO"),lt=Object.prototype,ft=Object.getPrototypeOf||function(t){return t=ut(t),x(t,ct)?t[ct]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?lt:null},ht=nt("iterator"),dt=!([].keys&&"next"in[].keys()),pt="values",vt=function(){return this},gt=function(t,e,n,r,i,o,a){!function(t,e,n){t.prototype=et(at,{next:w(1,n)}),ot(t,e+" Iterator")}(n,e,r);var s,u,c,l=function(t){if(!dt&&t in p)return p[t];switch(t){case"keys":case pt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h=i==pt,d=!1,p=t.prototype,v=p[ht]||p["@@iterator"]||i&&p[i],g=v||l(i),m=i?h?l("entries"):g:void 0,y="Array"==e&&p.entries||v;if(y&&(c=ft(y.call(new t)))!==Object.prototype&&c.next&&ot(c,f,!0),h&&v&&v.name!==pt&&(d=!0,g=function(){return v.call(this)}),a&&(dt||d||!p[ht])&&b(p,ht,g),T[e]=g,T[f]=vt,i)if(s={values:h?g:l(pt),keys:o?g:l("keys"),entries:m},a)for(u in s)u in p||O(p,u,s[u]);else S(S.P+S.F*(dt||d),e,s);return s},mt=(st=!0,function(t,e){var n,r,i=String(u(t)),o=s(e),a=i.length;return o<0||a<=o?st?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?st?i.charAt(o):n:st?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});gt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=mt(e,n),this._i+=t.length,{value:t,done:!1})});var yt=function(e,t,n,r){try{return r?t(p(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&p(i.call(e)),t}},_t=nt("iterator"),wt=Array.prototype,bt=function(t){return void 0!==t&&(T.Array===t||wt[_t]===t)},$t=function(t,e,n){e in t?_.f(t,e,w(0,n)):t[e]=n},xt=nt("toStringTag"),Lt="Arguments"==D(function(){return arguments}()),Mt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xt))?n:Lt?D(e):"Object"==(r=D(e))&&"function"==typeof e.callee?"Arguments":r},kt=nt("iterator"),St=g.getIteratorMethod=function(t){if(null!=t)return t[kt]||t["@@iterator"]||T[Mt(t)]},Ot=nt("iterator"),Tt=!1;try{[7][Ot]().return=function(){Tt=!0}}catch(t){}var jt=function(t,e){if(!e&&!Tt)return!1;var n=!1;try{var r=[7],i=r[Ot]();i.next=function(){return{done:n=!0}},r[Ot]=function(){return i},t(r)}catch(t){}return n};S(S.S+S.F*!jt(function(t){}),"Array",{from:function(t){var e,n,r,i,o=ut(t),a="function"==typeof this?this:Array,s=arguments.length,u=1<s?arguments[1]:void 0,c=void 0!==u,l=0,f=St(o);if(c&&(u=m(u,2<s?arguments[2]:void 0,2)),null==f||a==Array&&bt(f))for(n=new a(e=A(o.length));l<e;l++)$t(n,l,c?u(o[l],l):o[l]);else for(i=f.call(o),n=new a;!(r=i.next()).done;l++)$t(n,l,c?yt(i,u,[r.value,l],!0):r.value);return n.length=l,n}});var Dt=g.Array.from,Et=e(function(t){t.exports={default:Dt,__esModule:!0}});t(Et);var It,Pt,At,Ht,Ct=t(e(function(t,e){e.__esModule=!0;var n,r=(n=Et)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}})),Nt=g.JSON||(g.JSON={stringify:JSON.stringify}),Yt=function(t){return Nt.stringify.apply(Nt,arguments)},Ft=t(e(function(t){t.exports={default:Yt,__esModule:!0}}));It="keys",Pt=function(){return function(t){return V(ut(t))}},At=(g.Object||{})[It]||Object[It],(Ht={})[It]=Pt(At),S(S.S+S.F*a(function(){At(1)}),"Object",Ht);var Rt=g.Object.keys,Gt=t(e(function(t){t.exports={default:Rt,__esModule:!0}})),zt=e(function(D){!function(t){var u,e=Object.prototype,c=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a=t.regeneratorRuntime;if(a)D.exports=a;else{(a=t.regeneratorRuntime=D.exports).wrap=y;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={},s={};s[i]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&c.call(g,i)&&(s=g);var m=$.prototype=w.prototype=Object.create(s);b.prototype=m.constructor=$,$.constructor=b,$[o]=b.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(m),t},a.awrap=function(t){return{__await:t}},x(L.prototype),L.prototype[r]=function(){return this},a.AsyncIterator=L,a.async=function(t,e,n,r){var i=new L(y(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),p}}}function y(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(o,a,s){var u=l;return function(t,e){if(u===h)throw new Error("Generator is already running");if(u===d){if("throw"===t)throw e;return j()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=M(n,s);if(r){if(r===p)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===l)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=h;var i=_(o,a,s);if("normal"===i.type){if(u=s.done?d:f,i.arg===p)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u=d,s.method="throw",s.arg=i.arg)}}}(t,n,a),o}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function b(){}function $(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=_(u[t],u,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},i)}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function M(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,M(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=_(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:u,done:!0}}}(function(){return this}()||Function("return this")())}),Ut=function(){return this}()||Function("return this")(),Wt=Ut.regeneratorRuntime&&0<=Object.getOwnPropertyNames(Ut).indexOf("regeneratorRuntime"),Bt=Wt&&Ut.regeneratorRuntime;Ut.regeneratorRuntime=void 0;var Vt=zt;if(Wt)Ut.regeneratorRuntime=Bt;else try{delete Ut.regeneratorRuntime}catch(t){Ut.regeneratorRuntime=void 0}var Jt=Vt,qt=function(t,e){return{value:e,done:!!t}};gt(Array,"Array",function(t,e){this._t=I(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,qt(1)):qt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");T.Arguments=T.Array;for(var Zt=nt("toStringTag"),Kt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Qt=0;Qt<Kt.length;Qt++){var Xt=Kt[Qt],te=v[Xt],ee=te&&te.prototype;ee&&!ee[Zt]&&b(ee,Zt,Xt),T[Xt]=T.Array}var ne,re,ie,oe=e(function(t){var h={},d={},e=t.exports=function(t,e,n,r,i){var o,a,s,u,c=i?function(){return t}:St(t),l=m(n,r,e?2:1),f=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(bt(c)){for(o=A(t.length);f<o;f++)if((u=e?l(p(a=t[f])[0],a[1]):l(t[f]))===h||u===d)return u}else for(s=c.call(t);!(a=s.next()).done;)if((u=yt(s,l,a.value,e))===h||u===d)return u};e.BREAK=h,e.RETURN=d}),ae=nt("species"),se=function(t,e){var n,r=p(t).constructor;return void 0===r||null==(n=p(r)[ae])?e:o(n)},ue=v.process,ce=v.setImmediate,le=v.clearImmediate,fe=v.MessageChannel,he=v.Dispatch,de=0,pe={},ve="onreadystatechange",ge=function(){var t=+this;if(pe.hasOwnProperty(t)){var e=pe[t];delete pe[t],e()}},me=function(t){ge.call(t.data)};ce&&le||(ce=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return pe[++de]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},ne(de),de},le=function(t){delete pe[t]},"process"==D(ue)?ne=function(t){ue.nextTick(m(ge,t,1))}:he&&he.now?ne=function(t){he.now(m(ge,t,1))}:fe?(ie=(re=new fe).port2,re.port1.onmessage=me,ne=m(ie.postMessage,ie,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts?(ne=function(t){v.postMessage(t+"","*")},v.addEventListener("message",me,!1)):ne=ve in h("script")?function(t){Z.appendChild(h("script"))[ve]=function(){Z.removeChild(this),ge.call(t)}}:function(t){setTimeout(m(ge,t,1),0)});var ye={set:ce,clear:le},_e=ye.set,we=v.MutationObserver||v.WebKitMutationObserver,be=v.process,$e=v.Promise,xe="process"==D(be);function Le(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=o(n),this.reject=o(r)}var Me,ke,Se,Oe,Te,je,De={f:function(t){return new Le(t)}},Ee=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ie=v.navigator,Pe=Ie&&Ie.userAgent||"",Ae=function(t,e){if(p(t),i(e)&&e.constructor===t)return e;var n=De.f(t);return(0,n.resolve)(e),n.promise},He=nt("species"),Ce=ye.set,Ne=function(){var n,r,i,t=function(){var t,e;for(xe&&(t=be.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(xe)i=function(){be.nextTick(t)};else if(!we||v.navigator&&v.navigator.standalone)if($e&&$e.resolve){var e=$e.resolve(void 0);i=function(){e.then(t)}}else i=function(){_e.call(v,t)};else{var o=!0,a=document.createTextNode("");new we(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}(),Ye="Promise",Fe=v.TypeError,Re=v.process,Ge=Re&&Re.versions,ze=Ge&&Ge.v8||"",Ue=v[Ye],We="process"==Mt(Re),Be=function(){},Ve=ke=De.f,Je=!!function(){try{var t=Ue.resolve(1),e=(t.constructor={})[nt("species")]=function(t){t(Be,Be)};return(We||"function"==typeof PromiseRejectionEvent)&&t.then(Be)instanceof e&&0!==ze.indexOf("6.6")&&-1===Pe.indexOf("Chrome/66")}catch(t){}}(),qe=function(t){var e;return!(!i(t)||"function"!=typeof(e=t.then))&&e},Ze=function(l,n){if(!l._n){l._n=!0;var r=l._c;Ne(function(){for(var u=l._v,c=1==l._s,t=0,e=function(t){var e,n,r,i=c?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain;try{i?(c||(2==l._h&&Xe(l),l._h=1),!0===i?e=u:(s&&s.enter(),e=i(u),s&&(s.exit(),r=!0)),e===t.promise?a(Fe("Promise-chain cycle")):(n=qe(e))?n.call(e,o,a):o(e)):a(u)}catch(t){s&&!r&&s.exit(),a(t)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&Ke(l)})}},Ke=function(o){Ce.call(v,function(){var t,e,n,r=o._v,i=Qe(o);if(i&&(t=Ee(function(){We?Re.emit("unhandledRejection",r,o):(e=v.onunhandledrejection)?e({promise:o,reason:r}):(n=v.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=We||Qe(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},Qe=function(t){return 1!==t._h&&0===(t._a||t._c).length},Xe=function(e){Ce.call(v,function(){var t;We?Re.emit("rejectionHandled",e):(t=v.onrejectionhandled)&&t({promise:e,reason:e._v})})},tn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ze(e,!0))},en=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Fe("Promise can't be resolved itself");(n=qe(t))?Ne(function(){var e={_w:r,_d:!1};try{n.call(t,m(en,e,1),m(tn,e,1))}catch(t){tn.call(e,t)}}):(r._v=t,r._s=1,Ze(r,!1))}catch(t){tn.call({_w:r,_d:!1},t)}}};Je||(Ue=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,Ue,Ye,"_h"),o(t),Me.call(this);try{t(m(en,this,1),m(tn,this,1))}catch(t){tn.call(this,t)}},(Me=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:b(t,r,e[r]);return t}(Ue.prototype,{then:function(t,e){var n=Ve(se(this,Ue));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=We?Re.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ze(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Se=function(){var t=new Me;this.promise=t,this.resolve=m(en,t,1),this.reject=m(tn,t,1)},De.f=Ve=function(t){return t===Ue||t===Oe?new Se(t):ke(t)}),S(S.G+S.W+S.F*!Je,{Promise:Ue}),ot(Ue,Ye),je="function"==typeof g[Te=Ye]?g[Te]:v[Te],c&&je&&!je[He]&&_.f(je,He,{configurable:!0,get:function(){return this}}),Oe=g[Ye],S(S.S+S.F*!Je,Ye,{reject:function(t){var e=Ve(this);return(0,e.reject)(t),e.promise}}),S(S.S+!0*S.F,Ye,{resolve:function(t){return Ae(this===Oe?Ue:this,t)}}),S(S.S+S.F*!(Je&&jt(function(t){Ue.all(t).catch(Be)})),Ye,{all:function(t){var a=this,e=Ve(a),s=e.resolve,u=e.reject,n=Ee(function(){var r=[],i=0,o=1;oe(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||s(r))},u)}),--o||s(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=Ve(e),r=n.reject,i=Ee(function(){oe(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),S(S.P+S.R,"Promise",{finally:function(e){var n=se(this,g.Promise||v.Promise),t="function"==typeof e;return this.then(t?function(t){return Ae(n,e()).then(function(){return t})}:e,t?function(t){return Ae(n,e()).then(function(){throw t})}:e)}}),S(S.S,"Promise",{try:function(t){var e=De.f(this),n=Ee(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var nn=g.Promise,rn=e(function(t){t.exports={default:nn,__esModule:!0}}),on=t(rn),an=t(e(function(t,e){e.__esModule=!0;var n,u=(n=rn)&&n.__esModule?n:{default:n};e.default=function(t){return function(){var s=t.apply(this,arguments);return new u.default(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return u.default.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}})),sn={f:Object.getOwnPropertySymbols},un={f:{}.propertyIsEnumerable},cn=Object.assign,ln=!cn||a(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=cn({},t)[n]||Object.keys(cn({},e)).join("")!=r})?function(t,e){for(var n=ut(t),r=arguments.length,i=1,o=sn.f,a=un.f;i<r;)for(var s,u=E(arguments[i++]),c=o?V(u).concat(o(u)):V(u),l=c.length,f=0;f<l;)a.call(u,s=c[f++])&&(n[s]=u[s]);return n}:cn;S(S.S+S.F,"Object",{assign:ln});var fn=g.Object.assign,hn=t(e(function(t){t.exports={default:fn,__esModule:!0}})),dn=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));S(S.S+S.F*!c,"Object",{defineProperty:_.f});var pn=g.Object,vn=function(t,e,n){return pn.defineProperty(t,e,n)},gn=e(function(t){t.exports={default:vn,__esModule:!0}});t(gn);var mn=t(e(function(t,e){e.__esModule=!0;var n,i=(n=gn)&&n.__esModule?n:{default:n};e.default=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}()})),yn={"zh-cn":{init:"初始化一个评论",counts:"条评论",login:"登录",logout:"注销",leave:"发表评论",styling:"支持使用Markdown进行样式设置",write:"编写",preview:"预览",noPreview:"无预览内容",submit:"提交",reply:"回复",loadMore:"加载更多",loadEnd:"加载完毕",published:"发表于"},en:{init:"Initialize A Issue",counts:"comments",login:"Login",logout:"Logout",leave:"Leave a comment",styling:"Styling with Markdown is supported",write:"Write",preview:"Preview",noPreview:"Nothing to preview",submit:"Submit",reply:"Reply",loadMore:"Load More",loadEnd:"Load completed",published:"Published on"}};var _n=function(){return(window.location.href.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce(function(t,e){return t[e.slice(0,e.indexOf("="))]=e.slice(e.indexOf("=")+1),t},{})},wn=function(e){return Gt(e).map(function(t){return t+"="+encodeURIComponent(e[t]||"")}).join("&")},bn=function(t,e){localStorage.setItem(t,Ft(e))},$n=function(t){return JSON.parse(localStorage.getItem(t))},xn=function(t){localStorage.removeItem(t)},Ln=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,e=arguments[1];return t.querySelector(e)},Mn=function(t){var e=t instanceof Element?t:document.querySelector(t);e&&e.parentNode&&e.parentNode.removeChild(e)},kn=function(t){var e=t instanceof Element?t:document.querySelector(t),n=document.createElement("div");return n.classList.add("gt-loading"),n.innerHTML='\n    <div class="lds-ellipsis">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  ',e.appendChild(n),function(){return e.removeChild(n)}},Sn=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;window.scroll({behavior:"smooth",left:0,top:t.getBoundingClientRect().top+window.scrollY+e})},On=function(t,e,n,r){t=t.toUpperCase(),n=n&&Ft(n);var i={"Content-Type":"application/json",Accept:"application/json"};r&&(i=hn({},i,r));var o=$n("gitting-token");return o&&(i.Authorization="token "+o),fetch(e,{method:t,headers:i,body:n}).then(function(t){return 404===t.status?on.reject("Unauthorized."):401!==t.status?"text/html"===i.Accept?t.text():t.json():(xn("gitting-token"),xn("gitting-userInfo"),void location.reload())})};var Tn=e(function(t,e){t.exports=function(){var s="millisecond",d="second",p="minute",v="hour",g="day",m="week",y="month",c="quarter",_="year",i=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},t={s:o,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+o(r,2,"0")+":"+o(i,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,y),i=e-r<0,o=t.clone().add(n+(i?-1:1),y);return Number(-(n+(e-r)/(i?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:y,y:_,w:m,d:g,h:v,m:p,s:d,ms:s,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},a="en",u={};u[a]=e;var f=function(t){return t instanceof b},r=function(t,e,n){var r;if(!t)return null;if("string"==typeof t)u[t]&&(r=t),e&&(u[t]=e,r=t);else{var i=t.name;u[i]=t,r=i}return n||(a=r),r},h=function(t,e,n){if(f(t))return t.clone();var r=e?"string"==typeof e?{format:e,pl:n}:e:{};return r.date=t,new b(r)},w=t;w.l=r,w.i=f,w.w=function(t,e){return h(t,{locale:e.$L,utc:e.$u})};var b=function(){function t(t){this.$L=this.$L||r(t.locale,null,!0)||a,this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(i);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(e)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return w},e.isValid=function(){return!("Invalid Date"===this.$d.toString())},e.isSame=function(t,e){var n=h(t);return this.startOf(e)<=n&&n<=this.endOf(e)},e.isAfter=function(t,e){return h(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<h(t)},e.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},e.year=function(t){return this.$g(t,"$y",_)},e.month=function(t){return this.$g(t,"$M",y)},e.day=function(t){return this.$g(t,"$W",g)},e.date=function(t){return this.$g(t,"$D","date")},e.hour=function(t){return this.$g(t,"$H",v)},e.minute=function(t){return this.$g(t,"$m",p)},e.second=function(t){return this.$g(t,"$s",d)},e.millisecond=function(t){return this.$g(t,"$ms",s)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var r=this,i=!!w.u(e)||e,n=w.p(t),o=function(t,e){var n=w.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return i?n:n.endOf(g)},a=function(t,e){return w.w(r.toDate()[t].apply(r.toDate(),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},s=this.$W,u=this.$M,c=this.$D,l="set"+(this.$u?"UTC":"");switch(n){case _:return i?o(1,0):o(31,11);case y:return i?o(1,u):o(0,u+1);case m:var f=this.$locale().weekStart||0,h=(s<f?s+7:s)-f;return o(i?c-h:c+(6-h),u);case g:case"date":return a(l+"Hours",0);case v:return a(l+"Minutes",1);case p:return a(l+"Seconds",2);case d:return a(l+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var n,r=w.p(t),i="set"+(this.$u?"UTC":""),o=((n={}).day=i+"Date",n.date=i+"Date",n[y]=i+"Month",n[_]=i+"FullYear",n[v]=i+"Hours",n[p]=i+"Minutes",n[d]=i+"Seconds",n[s]=i+"Milliseconds",n)[r],a=r===g?this.$D+(e-this.$W):e;return this.$d[o]&&this.$d[o](a),this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.add=function(r,t){var e,i=this;r=Number(r);var n=w.p(t),o=function(t,e){var n=i.clone().set("date",1).set(t,e+r);return n.set("date",Math.min(i.$D,n.daysInMonth()))},a=function(t){var e=new Date(i.$d);return e.setDate(e.getDate()+t*r),w.w(e,i)};if(n===y)return o(y,this.$M);if(n===_)return o(_,this.$y);if(n===g)return a(1);if(n===m)return a(7);var s=((e={})[p]=6e4,e[v]=36e5,e[d]=1e3,e)[n]||1,u=this.valueOf()+r*s;return w.w(u,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),i=this.$locale(),o=i.weekdays,a=i.months,s=function(t,e,n,r){return t&&t[e]||n[e].substr(0,r)},u=function(t){return w.s(e.$H%12||12,t,"0")},c={YY:String(this.$y).slice(-2),YYYY:String(this.$y),M:String(this.$M+1),MM:w.s(this.$M+1,2,"0"),MMM:s(i.monthsShort,this.$M,a,3),MMMM:a[this.$M],D:String(this.$D),DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:s(i.weekdaysMin,this.$W,o,2),ddd:s(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(this.$H),HH:w.s(this.$H,2,"0"),h:u(1),hh:u(2),a:this.$H<12?"am":"pm",A:this.$H<12?"AM":"PM",m:String(this.$m),mm:w.s(this.$m,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:r};return n.replace(l,function(t){return-1<t.indexOf("[")?t.replace(/\[|\]/g,""):c[t]||r.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,n){var r,i=w.p(e),o=h(t),a=6e4*(o.utcOffset()-this.utcOffset()),s=this-o,u=w.m(this,o);return u=((r={})[_]=u/12,r[y]=u,r[c]=u/3,r[m]=(s-a)/6048e5,r.day=(s-a)/864e5,r[v]=s/36e5,r[p]=s/6e4,r[d]=s/1e3,r)[i]||s,n?u:w.a(u)},e.daysInMonth=function(){return this.endOf(y).$D},e.$locale=function(){return u[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=r(t,e,!0),n},e.clone=function(){return w.w(this.toDate(),this)},e.toDate=function(){return new Date(this.$d)},e.toJSON=function(){return this.toISOString()},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}();return h.prototype=b.prototype,h.extend=function(t,e){return t(e,b,h),h},h.locale=r,h.isDayjs=f,h.unix=function(t){return h(1e3*t)},h.en=u[a],h.Ls=u,h}()}),jn=e(function(t,e){t.exports=function(t,e,h){var n=e.prototype;h.en.relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};var r=function(t,e,n,r){for(var i,o,a=n.$locale().relativeTime,s=[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],u=s.length,c=0;c<u;c+=1){var l=s[c];l.d&&(i=r?h(t).diff(n,l.d,!0):n.diff(t,l.d,!0));var f=Math.ceil(Math.abs(i));if(f<=l.r||!l.r){o=a[l.l].replace("%d",f);break}}return e?o:(0<i?a.future:a.past).replace("%s",o)};n.to=function(t,e){return r(t,e,this,!0)},n.from=function(t,e){return r(t,e,this)},n.toNow=function(t){return this.to(h(),t)},n.fromNow=function(t){return this.from(h(),t)}}});e(function(t,e){t.exports=function(t){t=t&&t.hasOwnProperty("default")?t.default:t;var e={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t,e){switch(e){case"W":return t+"周";default:return t+"日"}},weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"}};return t.locale(e,null,!0),e}(Tn)});Tn.extend(jn);var Dn=function(){function e(t){dn(this,e),this.option=hn({},e.DEFAULTS,t),this.api=function(r){var i="https://api.github.com/repos/"+r.owner+"/"+r.repo+"/issues",o={client_id:r.clientID,client_secret:r.clientSecret};return{getToken:function(t){var e=hn({},o,{code:t,redirect_uri:location.href});return On("get",r.proxy+"?"+wn(e))},getUserInfo:function(t){return On("get","https://api.github.com/user?access_token="+t)},getIssueByLabel:function(t){var e=hn({},o,{labels:t,t:(new Date).getTime()});return On("get",i+"?"+wn(e))},getIssueById:function(t){var e=hn({},o,{t:(new Date).getTime()});return On("get",i+"/"+t+"?"+wn(e))},getComments:function(t,e){var n=hn({},o,{per_page:r.perPage,page:e,t:(new Date).getTime()});return On("get",i+"/"+t+"/comments?"+wn(n),null,{Accept:"application/vnd.github.v3.full+json"})},creatIssues:function(t){return On("post",i,t)},creatComments:function(t,e){return On("post",i+"/"+t+"/comments",{body:e},{Accept:"application/vnd.github.v3.full+json"})},mdToHtml:function(t){return On("post","https://api.github.com/markdown",{text:t},{Accept:"text/html"})}}}(this.option),this.page=1,this.issue={},this.comments=[],this.token=$n("gitting-token"),this.userInfo=$n("gitting-userInfo"),this.isLogin=!!this.token&&!!this.userInfo,this.i=function(t){var e=yn[t]||yn["zh-cn"];return function(t){return e[t]||"Unmath key: "+t}}(this.option.language),this.creatInit=this.creatInit.bind(this),this.logout=this.logout.bind(this),Tn.locale(this.option.language)}var t,n,r,i;return mn(e,[{key:"render",value:(i=an(Jt.mark(function t(e){var n,r,i,o;return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.option.initStart&&this.option.initStart(),this.$container=e instanceof Element?e:Ln(document,e),this.$container.innerHTML="",n=kn(e),r=_n(),i=r.code)return t.next=8,this.getUserInfo(i);t.next=8;break;case 8:if(0<Number(this.option.number))return t.next=11,this.api.getIssueById(this.option.number);t.next=15;break;case 11:this.issue=t.sent,this.errorHandle(!this.issue||!this.issue.number,"Failed to get issue by id ["+this.option.number+"] , Do you want to initialize an new issue?",this.creatInit),t.next=20;break;case 15:return o=this.option.labels.concat(this.option.id).join(","),t.next=18,this.api.getIssueByLabel(o);case 18:this.issue=t.sent[0],this.errorHandle(!this.issue||!this.issue.number,"Failed to get issue by labels ["+o+"] , Do you want to initialize an new issue?",this.creatInit);case 20:return n(),t.next=23,this.creatGitting();case 23:return t.next=25,this.creatComment();case 25:return t.next=27,this.eventBind();case 27:this.option.initEnd&&this.option.initEnd();case 28:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"getUserInfo",value:(r=an(Jt.mark(function t(e){var n,r,i,o;return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return delete(n=_n()).code,r=location.href.split("?")[0]+(0<Gt(n).length?"?"+wn(n):""),history.replaceState(null,"",r),t.next=6,this.api.getToken(e);case 6:return i=t.sent,this.errorHandle(!i.access_token,"Can not get token, Please login again!",this.logout),bn("gitting-token",i.access_token),this.token=i.access_token,t.next=12,this.api.getUserInfo(i.access_token);case 12:return o=t.sent,this.errorHandle(!o.id,"Can not get user info, Please login again!",this.logout),bn("gitting-userInfo",o),this.userInfo=o,this.isLogin=!0,t.abrupt("return",o);case 18:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"creatInit",value:function(){var e,n=this,t={state:"Gitting",client_id:this.option.clientID,redirect_uri:location.href,scope:"public_repo"};(this.$container.insertAdjacentHTML("beforeend",'\n        <div class="gt-init">\n          '+(this.isLogin?'<a class="gt-init-btn" href="#">'+this.i("init")+"</a>":'<a class="gt-login" href="http://github.com/login/oauth/authorize?client_id='+wn(t)+'">'+this.i("login")+"</a>")+"\n        </div>\n      "),this.isLogin)&&(this.$init=Ln(this.$container,".gt-init-btn"),this.$init.addEventListener("click",(e=an(Jt.mark(function t(e){return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),n.initIssue();case 2:case"end":return t.stop()}},t,n)})),function(t){return e.apply(this,arguments)})))}},{key:"initIssue",value:(n=an(Jt.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorHandle(!this.userInfo.login,"You have not logged in yet"),this.errorHandle(!this.option.admin.includes(this.userInfo.login),"You have no permission to initialize this issue"),e=kn(this.$container),n=hn({},{title:this.option.title,body:this.option.body,labels:this.option.labels.concat(this.option.id)},i),t.next=6,this.api.creatIssues(n);case 6:r=t.sent,this.errorHandle(!r||!r.number,"Initialize issue failed: "+Ft(n),e),location.reload();case 9:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"creatGitting",value:function(){var t={state:"Gitting",client_id:this.option.clientID,redirect_uri:location.href,scope:"public_repo"};this.$container.insertAdjacentHTML("beforeend",'\n      <div class="gt-header clearfix">\n        <a href="'+this.issue.html_url+'" class="fl" target="_blank">\n          '+this.issue.comments+" "+this.i("counts")+'\n        </a>\n        <div class="gt-mate fr clearfix">\n          '+(this.isLogin?'<a href="'+this.userInfo.html_url+'" class="gt-name fl" target="_blank">'+this.userInfo.login+'</a><a href="#" class="gt-logout fl">'+this.i("logout")+"</a>":'<a href="http://github.com/login/oauth/authorize?client_id='+wn(t)+'" class="gt-login fl">'+this.i("login")+"</a>")+'\n          <a href="https://github.com/zhw2590582/gitting" class="fl" target="_blank">Gitting 1.1.3</a>\n        </div>\n      </div>\n      <div class="gt-body">\n        <div class="gt-avatar">\n          <img src="'+(this.isLogin?this.userInfo.avatar_url:this.option.avatar)+'" alt="@'+(this.isLogin?this.userInfo.login:"github")+'">\n        </div>\n        <div class="gt-editor">\n            <div class="gt-markdown markdown-body"></div>\n            <textarea placeholder="'+this.i("leave")+'" class="gt-textarea" maxlength="'+this.option.maxlength+'"></textarea>\n            <div class="gt-tip clearfix">\n                <a class="fl" href="https://guides.github.com/features/mastering-markdown/" target="_blank">'+this.i("styling")+'</a>\n                <div class="fr">\n                  <span class="gt-counts">0</span> / '+this.option.maxlength+'\n                </div>\n            </div>\n            <div class="gt-tool clearfix">\n                <div class="gt-switch fl clearfix">\n                    <span class="gt-write gt-btn fl active">'+this.i("write")+'</span>\n                    <span class="gt-preview gt-btn fl">'+this.i("preview")+"</span>\n                </div>\n                "+(this.isLogin?'<button class="gt-send fr">'+this.i("submit")+"</button>":'<a class="gt-send fr" href="http://github.com/login/oauth/authorize?client_id='+wn(t)+'">'+this.i("login")+"</a>")+'\n            </div>\n          </div>\n      </div>\n      <div class="gt-comments"></div>\n      <div class="gt-comments-load"></div>\n    '),this.$editor=Ln(this.$container,".gt-editor"),this.$markdown=Ln(this.$container,".gt-markdown"),this.$textarea=Ln(this.$container,".gt-textarea"),this.$counts=Ln(this.$container,".gt-counts"),this.$comments=Ln(this.$container,".gt-comments"),this.$commentsLoad=Ln(this.$container,".gt-comments-load")}},{key:"creatComment",value:(t=an(Jt.mark(function t(){var e,n,r,i,o=this;return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$commentsLoad.innerHTML="",n=kn(this.$commentsLoad),t.next=4,this.api.getComments(this.issue.number,this.page++);case 4:return r=t.sent,(e=this.comments).push.apply(e,Ct(r)),i=r.map(function(t){return o.commentTemplate(t)}).join(""),this.$comments.insertAdjacentHTML("beforeend",i),n(),r.length<this.option.perPage?this.$commentsLoad.innerHTML='<div class="gt-load-end">'+this.i("loadEnd")+"</div>":this.$commentsLoad.innerHTML='<a class="gt-load-more" href="#">'+this.i("loadMore")+"</a>",t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"commentTemplate",value:function(t){return'\n      <div class="comments-item'+(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?" add":"")+'" data-id="'+t.id+'">\n        <div class="gt-avatar">\n          <img src="'+t.user.avatar_url+'" alt="@'+t.user.login+'">\n        </div>\n        <div class="gt-comment-content caret">\n          <div class="gt-comment-body markdown-body">\n            '+t.body_html+'\n          </div>\n          <div class="gt-comment-mate clearfix">\n            <a class="gt-comment-name fl" href="'+t.user.html_url+'" target="_blank">'+t.user.login+'</a>\n            <span class="gt-comment-time fl" data-time="'+t.created_at+'">'+this.i("published")+" "+Tn(t.created_at).fromNow()+'</span>\n            <a class="gt-comment-reply fr" href="#" target="_blank" data-id="'+t.id+'">'+this.i("reply")+"</a>\n          </div>\n        </div>\n      </div>\n    "}},{key:"eventBind",value:function(){var m=this,t=["propertychange","change","click","keyup","input","paste"],y=function(t){return m.$counts.innerHTML=m.$textarea.value.length};t.forEach(function(t){return m.$textarea.addEventListener(t,y)});var e,n=(e=an(Jt.mark(function t(e){var n,r,i,o,a,s,u,c,l,f,h,d,p,v,g;return Jt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.target).classList.contains("gt-logout")&&(e.preventDefault(),m.logout()),n.classList.contains("gt-write")&&(m.$editor.classList.remove("gt-mode-preview"),m.$markdown.innerHTML=""),!n.classList.contains("gt-preview")){t.next=16;break}if(m.$editor.classList.add("gt-mode-preview"),(r=m.$textarea.value).trim())return i=kn(m.$markdown),t.next=10,m.api.mdToHtml(r);t.next=15;break;case 10:o=t.sent,i(),m.$markdown.innerHTML=o,t.next=16;break;case 15:m.$markdown.innerHTML=m.i("noPreview");case 16:if(!n.classList.contains("gt-send")){t.next=30;break}if((a=m.$textarea.value).trim()){t.next=20;break}return t.abrupt("return");case 20:return s=kn(m.$editor),t.next=23,m.api.creatComments(m.issue.number,a);case 23:u=t.sent,s(),m.errorHandle(!u||!u.id,"Comment failed!"),m.$textarea.value="",m.$comments.insertAdjacentHTML("beforeend",m.commentTemplate(u,!0)),c=Ln(m.$container,"[data-id='"+u.id+"']"),Sn(c);case 30:if(!n.classList.contains("gt-comment-reply")){t.next=43;break}if(e.preventDefault(),l=n.dataset.id,f=m.comments.find(function(t){return t.id==l}),h=m.$textarea.value,d=(h?"\n":"")+"> @"+f.user.login+"\n> "+f.body+"\n",(p=h+d).length>m.option.maxlength)return t.abrupt("return");t.next=39;break;case 39:m.$textarea.value=p,y(),m.$textarea.focus(),Sn(m.$textarea,-30);case 43:if(n.classList.contains("gt-load-more"))return e.preventDefault(),t.next=47,m.creatComment();t.next=49;break;case 47:(v=t.sent).length&&(g=Ln(m.$container,"[data-id='"+v[0].id+"']"),Sn(g,-100));case 49:case"end":return t.stop()}},t,m)})),function(t){return e.apply(this,arguments)});this.$container.addEventListener("click",n),this.destroy=function(){t.forEach(function(t){return m.$textarea.removeEventListener(t,y)}),m.$container.removeEventListener("click",n)}}},{key:"logout",value:function(){xn("gitting-token"),xn("gitting-userInfo"),location.reload()}},{key:"errorHandle",value:function(t,e,n){if(t)throw Mn(Ln(this.$container,".gt-error")),Mn(Ln(this.$container,".gt-loading")),this.$container.insertAdjacentHTML("afterbegin",'<div class="gt-error">'+e+"</div>"),n&&n(),new TypeError(e)}}],[{key:"DEFAULTS",get:function(){return{clientID:"",clientSecret:"",repo:"",owner:"",admin:[],id:location.pathname,number:-1,labels:["Gitting"],title:document.title,body:document.title+"\n"+location.href,language:"zh-cn",perPage:10,maxlength:500,avatar:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",proxy:"https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token"}}}]),e}();return window.Gitting=Dn});
